<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Login Screen (Full Screen) -->
        <div id="login-screen" class="screen">
            <div class="login-container">
                <div class="login-card">
                    <div class="login-header">
                        <h1>Time Tracker</h1>
                        <p class="subtitle">Sign in to start tracking your time</p>
                    </div>
                    <form id="login-form">
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Sign In</button>
                    </form>
                    <div id="login-error" class="error-message"></div>
                </div>
            </div>
        </div>

        <!-- Authenticated App Layout -->
        <div id="app-layout" class="app-layout hidden">
            <!-- Sidebar Navigation -->
            <aside id="sidebar" class="sidebar">
                <div class="sidebar-header">
                    <div class="app-logo">‚è±Ô∏è</div>
                    <h3>Time Tracker</h3>
                </div>
                <nav class="sidebar-nav">
                    <button id="nav-shifts" class="sidebar-link active">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-text">My Shifts</span>
                    </button>
                    <button id="nav-timer" class="sidebar-link">
                        <span class="nav-icon">‚è±Ô∏è</span>
                        <span class="nav-text">Activity Timer</span>
                    </button>
                    <button id="nav-history" class="sidebar-link">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Activities</span>
                    </button>
                </nav>
                <div class="sidebar-footer">
                    <button id="logout-btn" class="btn btn-secondary btn-sm">Logout</button>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main id="main-content" class="main-content">
                <!-- Shifts Screen -->
                <div id="shifts-screen" class="screen">
                    <div class="page-header">
                        <h2>My Shifts</h2>
                        <p>View your scheduled shifts and create activities</p>
                    </div>
                    
                    <div class="shifts-card">
                        <div id="shifts-list" class="shifts-list"></div>
                    </div>
                </div>

                <!-- Timer Screen -->
                <div id="timer-screen" class="screen hidden">
                    <div class="page-header">
                        <h2>Activity Timer</h2>
                        <p>Track your work activities within shifts</p>
                    </div>
                    
                    <div class="timer-card">
                        <!-- Shift Selection -->
                        <div class="shift-selection-section">
                            <div class="form-group">
                                <label for="shift-select">Selected Shift</label>
                                <select id="shift-select" class="select" required>
                                    <option value="">Select a shift</option>
                                </select>
                            </div>
                            <div id="shift-info" class="shift-info hidden">
                                <div class="info-grid">
                                    <div class="info-item">
                                        <span class="info-label">Project</span>
                                        <span id="shift-project" class="info-value">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Task</span>
                                        <span id="shift-task" class="info-value">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Start Time</span>
                                        <span id="shift-start" class="info-value">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">End Time</span>
                                        <span id="shift-end" class="info-value">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Activity Controls -->
                        <div class="activity-controls">
                            <button id="start-activity-btn" class="btn btn-success btn-large" disabled>
                                <span class="btn-icon">‚ñ∂Ô∏è</span>
                                Start Timer
                            </button>
                            <button id="end-activity-btn" class="btn btn-danger btn-large" disabled>
                                <span class="btn-icon">‚èπÔ∏è</span>
                                End Timer
                            </button>
                        </div>

                        <!-- Timer Display -->
                        <div class="timer-display">
                            <div id="timer" class="timer">00:00:00</div>
                            <div id="status" class="status">Select a shift to start timer</div>
                        </div>

                        <!-- Screenshot Status -->
                        <div id="screenshot-status" class="screenshot-status hidden">
                            <div class="screenshot-indicator">
                                <span class="screenshot-icon">üì∏</span>
                                <span class="screenshot-text">Screenshots: <span id="screenshot-count">0</span></span>
                                <span id="screenshot-permission" class="permission-indicator">‚úÖ</span>
                            </div>
                            <div class="screenshot-info">
                                <small>Taking screenshots every <span id="screenshot-interval">20</span> seconds</small>
                                <button id="retry-permission-btn" class="btn btn-sm btn-secondary" style="display: none;">
                                    Retry Permission
                                </button>
                            </div>
                        </div>

                        <!-- Activity Info -->
                        <div id="activity-info" class="activity-info hidden">
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">Timer Start</span>
                                    <span id="activity-start" class="info-value">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Duration</span>
                                    <span id="activity-duration" class="info-value">00:00:00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Save Activity Button -->
                        <div class="save-activity-section">
                            <button id="save-activity-btn" class="btn btn-primary btn-large" disabled>
                                <span class="btn-icon">üíæ</span>
                                Save Activity
                            </button>
                        </div>

                        <!-- Messages -->
                        <div id="timer-error" class="error-message"></div>
                        <div id="timer-success" class="success-message"></div>
                    </div>
                </div>

                <!-- Activities History Screen -->
                <div id="history-screen" class="screen hidden">
                    <div class="page-header">
                        <h2>Activities</h2>
                        <p>View your activity history</p>
                    </div>
                    
                    <div class="history-card">
                        <div id="activities-list" class="activities-list"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html> 